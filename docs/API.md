# API Документация AmbulanceBot

## Внутренние API

### FSM (Finite State Machine)

Бот использует конечный автомат для управления состояниями диалога с пользователем. Основные состояния:

- `GetDataFSM` - Сбор данных о пациенте
- `CallAmbulanceFSM` - Процесс вызова скорой помощи

### Обработчики (Handlers)

#### Командные обработчики (`bot_command_handlers.py`)
- `/start` - Инициализация бота
- `/help` - Справка по использованию
- `/call` - Начало процесса вызова скорой

#### Обработчики вызовов (`user_call_handlers.py`)
- Обработка нажатий на кнопки
- Валидация введенных данных
- Отправка данных в систему экстренных служб

## Внешние API

### Telegram Bot API
Бот использует следующие методы Telegram Bot API:
- `sendMessage` - Отправка сообщений
- `editMessageText` - Редактирование сообщений
- `answerCallbackQuery` - Обработка callback-запросов

### Интеграция с экстренными службами
Бот интегрируется с API экстренных служб для:
- Передачи данных о вызове
- Получения статуса обработки вызова
- Подтверждения принятия вызова

## Структура данных

### Формат данных пациента
```python
{
    "name": str,
    "age": int,
    "address": str,
    "symptoms": str,
    "phone": str
}
```

### Формат вызова скорой помощи
```python
{
    "call_id": str,
    "patient_data": dict,
    "timestamp": datetime,
    "status": str
}
```

## Обработка ошибок

### Логирование
На данном этапе логгирование **не реализовано**.
